## 📚 2023-07-22 (토)

    ❣️발표자 : 박선영
    ❣️참석인원 : 전원 참석
    ❣️장소 : 비대면(Discord)

## 쏙쏙 들어오는 함수형 코딩 [CHAPTER 1 ~ 3]

### 함수형 프로그래밍이란?

1. 수학 함수를 사용하고 \*부수 효과(side effect)를 피하는 것이 특징이 프로그래밍 패러다임

2. 부수 효과 없이 \*순수 함수(pure function)만 사용하는 프로그래밍 스타일

#### 부수 효과란?

- 함수가 리턴값 이외에 하는 모든 일을 말한다. => ex) 메일을 보내기나 전역 상태 수정하기 같은 일이 부수 효과.
- 부수 효과는 함수를 부를 때마다 발생하기 때문에 문제가 될 수 있다.
- 어떤 경우에는 리턴값이 필요해서 불렀지만 의도하지 않게 부수 효과가 발생할 수 있다.
- 대부분의 함수형 프로그래머는 불필요한 부수 효과를 가능한 사용하지 않으려고 한다.

#### 순수 함수란?

- 인자에만 의존하고 부수 효과가 없는 함수이다.
- 인자에만 의존한다는 말은 같은 인자를 넣으면 항상 같은 결과를 돌려준다는 말이다.
- 🖐🏻수학에서 함수도 그렇게 동작하기 때문에 순수 함수 = 수학 함수 라고 볼 수 있다.

  💡정의에 따르면 함수형 프로그래머는 항상 부수 효과를 피하고 순수 함수만 사용해야 할 것 같지만
  실제 함수형 프로그래머는 부수 효과와 순수하지 않은 함수를 사용한다.
  실용적인 측면에서 함수형 프로그래밍 정의의 문제점

#### 문제 1: 부수 효과는 필요하다.

- 정의에 따르면 함수형 프로그래밍은 부수 효과를 피해야 하지만, 부수 효과는 소프트웨어를 실행하는 이유이다.

  👉🏻 필요할때는 써야 한다!!

#### 문제 2: 함수형 프로그래밍은 부수 효과를 잘 다룰 수 있다.

- 함수형 프로그래머는 부수 효과가 실제로 필요하지만 문제가 될 수 있다는 것을 알기 때문에 부수 효과를 잘 다루기 위한 도구를 많이 알고 있다.
- 정의에는 순수 함수만 쓰라는 것처럼 되어 있지만, 함수형 프로그래머는 순수하지 않은 함수도 사용한다.
- 또한 순수하지 않은 함수를 잘 다룰 수 있는 기술이 많이 있다.

#### 문제 3: 함수형 프로그래밍은 실용적이다.

- 정의에서는 함수형 프로그래밍이 수학적이라 실제 소프트웨어 개발에서 사용하지 않는 것처럼 느껴진다.
- 하지만 함수형 프로그래밍으로 잘 만들어진 좋은 소프트웨어가 많이 있다.

### 액션과 계산, 데이터 구분하기

    함수형 프로그래머는 직감적으로 코드를 세 분류로 나눈다.

    1. 액션 : 부르는 시점에 의존
    2. 계산 : 입력값을 계산해 출력하는 것
    3. 데이터 : 이벤트에 대한 사실을 기록한 것

```
// 액션
sendEmail(to, from, subject, body)
saveUserDB(user)
getCurrentTime()

// 계산
sum(numbers)
string_length(str)

// 데이터
[1, 5, 10, 25, 98]
{"firstName": "Park"
"lastName": "SeonYeong"}

```

**액션과 계산, 데이터를 구분하는 것**은 함수형 프로그래밍의 기본 개념이다.<br/>
👉🏻이것이 함수형 프로그래밍의 핵심 개념이다!

🙌🏻 함수형 프로그래머는 **액션보다 ➡️ 계산을 좋아하고 계산보다 ➡️ 데이터를 좋아한다.**
이렇게 구분하지 않으면 함수형 프로그래밍을 제대로 하기 어렵다.

### 간단한 예시를 통해 알아보자.

---

    프로젝트 관리를 위해 클라우드 서비스를 만든다고 생각해보자.
    여러 클라이언트가 작업 완료 표시를 하면 서버에서 이메일을 통해 알려주는 서비스이다.
    이 서비스에서 액션과 계산, 데이터는 어떤 것일까? 그리고 함수형 프로그래머는 이 시나리오에서 동작을 어떻게 구분할까?

#### 1단계: 사용자가 작업 완료 표시를 함

- 이것은 UI이벤트인데 실행 횟수에 의존하기 때문에 액션이다.

#### 2단계: 클라이언트가 서버로 메시지를 보냄

- 메시지를 보내는 것도 액션이다. 그리고 메시지 자체는 나중에 서버에서 해석해야 하는 값이기 때문에 데이터이다.

#### 3단계: 서버가 메시지를 받음

- 메시지를 받는 것은 횟수에 의존하므로 액션이다.

#### 4단계: 서버가 데이터베이스를 변경한다.

- 내부 상태를 바꾸는 것은 액션이다.

#### 5단계: 서버가 누구에게 알림을 보낼지 결정

- 결정하는 것은 계산이다. 입력값이 같다면 서버는 항상 같은 결정을 내리기 때문이다.

#### 6단계: 서버가 이메일로 알림을 보냄

- 이메일 보내기는 액션이다. 같은 메일을 한 번 보내는 것과 두 번 보내는 것은 다르다.

### 액션, 계산, 데이터는 어떤 특징을 갖고 있을까?

---

#### 1. 액션

- **액션**은 실행 기점이나 횟수 또는 둘 다에 의존한다.
  긴급한 메일을 오늘 보내는 것과 다음 주에 보내는 것은 완전히 다르다.
  같은 메일을 10번 보내는 것과 한 번 보내는 것 또는 보내지 않는 것 역시 다르다.
  <br/>
  <br/>

👉🏻 **각 분류에 해당하는 함수형 프로그래밍 도구?**

- 시간이 지남에 따라 안전하게 상태를 바꿀 수 있는 방법
- 순서를 보장하는 방법
- 액션이 정확히 한 번만 실행되게 보장하는 방법

#### 2. 계산

- **계산**은 입력값으로 출력값을 만드는 것이다.

같은 입력값을 가지고 계산하면 항상 같은 결괏값이 나온다. 언제, 어디서 계산해도 결과는 같고 외부에 영향을 주지 않는다.

계산은 테스트하기 쉽고 언제든지 몇번을 불러도 안전하다!

👉🏻 **각 분류에 해당하는 함수형 프로그래밍 도구?**

- 정확성을 위한 정적 분석
- 소프트웨어에서 쓸 수 있는 수학적 지식
- 테스트 전략

#### 3. 데이터

    데이터는 이벤트에 대해 기록한 사실이다.

    데이터는 실행하는 코드만큼 복잡하지 않기 때문에 다른 것과 구분된다. 알아보기 쉬운 속성으로 되어 있고 실행하지 않아도 데이터 자체로 의미가 있다. 또한 같은 데이터를 여러 형태로 해석할 수 있다.

👉🏻 **각 분류에 해당하는 함수형 프로그래밍 도구?**

- 효율적으로 접근하기 위해 데이터를 구성하는 방법
- 데이터를 보관하기 위한 기술
- 데이터를 이용해 중요한 것을 발견하는 원칙
  액션, 계산, 데이터를 구분하면 어떤 장점이 있을까?
  함수형 프로그래밍은 요즘 유행하는 분산 시스템에 잘 어울린다.

### 함수형 프로그래밍

    단순한 트렌드가 아니고 오랫동안 쌓아온 수학 지식을 기반으로 하는 가장 오래된 프로그래밍 패러다임이다.

여러 컴퓨터가 네트워크를 통해 통신하기 시작하면 소프트웨어가 복잡해진다.
처리해야 할 메시지는 순서가 섞일 수 있고 중복되기도 하고 유실되기도 한다.

시간에 따라 바뀌는 값을 모델링할 때 동작 방법을 이해하는 것은 중요하지만 쉽지 않다.
실행 시점이나 횟수에 의존하는 코드를 없애면, 코드를 더 쉽게 이해할 수 있고 심각한 버그를 막을 수 있다.

#### ☝🏻~~ 위의 문제점들에서 장점을 찾아보면?

- 데이터와 계산은 실행 시점이나 횟수에 의존하지 않는다! 그래서 코드를 데이터와 계산으로 바꿀수록 분산 시스템에서 생기는 여러가지 문제를 해결할 수 있다.

- 액션은 실행 시점과 횟수에 의존하기 때문에 여전히 문제가 되지만, 코드 전체에 영향을 주지 않도록 격리시키면 된다.

- 또 분산 시스템이 아무리 불확실성을 가지고 있다고 해도 액션을 안전하게 다룰 수 있는 기술이 있기 때문에 안심할 수 있다.

- 그리고 코드의 많은 부분을 액션에서 계산으로 옮기면 결과적으로 액션도 다루기 쉬워진다.

#### ❗️분산 시스템 규칙 3가지

1. 메시지 순서가 바뀔 수 있다.
2. 메시지는 한 번 이상 도착할 수도 있고 도착하지 않을 수도 있다.
3. 응답을 받지 못하면 무슨일이 생겼는지 알 수 없다.

   => 분산 시스템이 되면 모든 것이 복잡해진다!!

<br/>
<br/>

## 토의내용

### 액션과 계산의 차이점에 대해서

    각자 이해한 내용에 대해 논의하고 예제를 활용하면서 진행함

- **데이터**
  - 이벤트에 대한 사실 = fact = 변하지 않는 것
  - 변하지 않는 사실로 구성된 객체
  - 예시) 문자열
- **계산**
  - 데이터를 가지고 계산을 진행함 = 순수함수를 의미
  - 순수 함수를 통해 인풋에 대한 아웃풋을 반환
  - 같은 인풋을 넣었을 때, 똑같은 아웃풋이 나온다 = 역동성 보장
- **액션**

  - 실행 시점 또는 횟수에 의존(비동기, 이벤트 등)
  - 의존하는 것에 따라 다른 결과를 내는 함수 = 계산과 다르게 같은 인풋을 넣어도 다른 액션이 나오는 것
  - 대부분이 액션으로 사고하고 코드를 작성하기에 계산(=순수함수)화 하는것 어려움느낌
  - 예) date 와 같은 날짜 표현 객체, api 받을 때
    <br/>

<br/>

- 함수에서의 데이터, 계산, 액션의 구조?
  - 함수안에 계산과 데이터가 있고 함수밖에 액션이 있다고 이해
- 함수형 프로그래밍
  - 액션에서 계산을 빼내어 테스트 하기 쉽고 조립하기 쉬운 구조로 쪼개는 것

### 다음모임 : 2023-07-30(대면)
